<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å ±å‘Š + æ¨¡æ“¬å¯¦é©—</title>
<link rel="stylesheet" href="style.css">
<style>
body { margin:0; padding:20px; font-family:'Segoe UI',sans-serif; background:#000; color:#fff; }
#viewer { text-align:center; margin-bottom:50px; }
#slideImg { max-width:90%; height:auto; border:3px solid #00ff88; border-radius:10px; }
#simulationWrapper { margin-top:100px; } /* æ¨¡æ“¬å€èˆ‡å¹»ç‡ˆç‰‡æœ‰é–“è· */
</style>
</head>
<body>

<!-- å¹»ç‡ˆç‰‡å€ -->
<div id="viewer">
  <img id="slideImg" src="images/Thank you_page-0001.jpg">
</div>
<div id="startScreen">
  <button id="startBtn">â–¶ é–‹å§‹æ’­æ”¾</button>
</div>

<!-- ä¸‹æ–¹æ¨¡æ“¬å¯¦é©—å€ -->
<div id="simulationWrapper">
  <h2 style="color:#00ff88;">æ¨¡æ“¬å¯¦é©—ï¼šå…‰é›»æ¿èˆ‡ LED é›»æµ</h2>
  <div class="container">
      <!-- æ§åˆ¶é¢æ¿ -->
      <div class="control-panel">
          <div class="control-group">
              <h3>ğŸ¨ ç»ç’ƒç´™é¡è‰²</h3>
              <select id="glassColor">
                  <option value="clear">é€æ˜(100%)</option>
                  <option value="lightBlue">æ·ºè—(85%)</option>
                  <option value="green">ç¶ è‰²(75%)</option>
                  <option value="yellow">é»ƒè‰²(70%)</option>
                  <option value="orange">æ©™è‰²(60%)</option>
                  <option value="red">ç´…è‰²(55%)</option>
                  <option value="darkBlue">æ·±è—(45%)</option>
                  <option value="purple">ç´«è‰²(40%)</option>
                  <option value="brown">æ£•è‰²(35%)</option>
                  <option value="gray">ç°è‰²(25%)</option>
              </select>
              <span class="value-display" id="glassColorValue">é€æ˜</span>
          </div>
          <div class="simulation-area" id="simulationArea" style="height:250px;"></div>
      </div>
      <!-- LED åœ–è¡¨ -->
      <div>
          <canvas id="mainChart"></canvas>
          <div id="dataTable"></div>
      </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
<script>
// å¹»ç‡ˆç‰‡ JS
const audio = new Audio("audio/part1.mp3");
const img = document.getElementById("slideImg");
const slides = [
  { time: 0, src: "images/Thank you_page-0001.jpg" },
  { time: 15, src: "images/Thank you_page-0002.jpg" },
  { time: 18, src: "images/Thank you_page-0003.jpg" },
  { time: 41, src: "images/Thank you_page-0004.jpg" },
  { time: 69, src: "images/Thank you_page-0005.jpg" }
  // ... ä¾åºè£œä¸Š 24 å¼µ
];
img.src = slides[0].src;
audio.addEventListener("timeupdate", ()=>{
  const t = audio.currentTime;
  for(let i=slides.length-1;i>=0;i--){
    if(t>=slides[i].time){
      if(img.src.indexOf(slides[i].src)===-1) img.src=slides[i].src;
      break;
    }
  }
});
document.getElementById("startBtn").addEventListener("click", ()=>{
  document.getElementById("startScreen").style.display="none";
  audio.currentTime=0; audio.play();
});

// æ¨¡æ“¬å¯¦é©— JS
const rawData={red:4.51,green:3.64,blue:3.79,yellow:5.68,darkBlue:1.69,purple:3.25};
const ledInfo=[
  {name:'ç´…è‰²',nameEn:'red',color:'#FF0000'},
  {name:'ç¶ è‰²',nameEn:'green',color:'#00FF00'},
  {name:'è—è‰²',nameEn:'blue',color:'#87CEEB'},
  {name:'é»ƒè‰²',nameEn:'yellow',color:'#FFFF00'},
  {name:'æ·±è—',nameEn:'darkBlue',color:'#00008B'},
  {name:'ç´«è‰²',nameEn:'purple',color:'#9370DB'}
];
const glassTrans={clear:1,lightBlue:0.85,green:0.75,yellow:0.7,orange:0.6,red:0.55,darkBlue:0.45,purple:0.4,brown:0.35,gray:0.25};

let ctx=document.getElementById('mainChart').getContext('2d'); let chart=null;
function updateChart(currentData){
  const labels=ledInfo.map(d=>d.name);
  const data=ledInfo.map(d=>currentData[d.nameEn]);
  if(chart) chart.destroy();
  chart=new Chart(ctx,{type:'bar',data:{labels:labels,datasets:[{label:'é›»æµ(mA)',data:data,backgroundColor:ledInfo.map(d=>d.color)}]},options:{responsive:true,plugins:{legend:{display:false}}}});
}
function updateSimulation(glass){
  const t=glassTrans[glass]; const currentData={};
  for(let k in rawData) currentData[k]=rawData[k]*t;
  updateChart(currentData);
}
document.getElementById('glassColor').addEventListener('change',e=>updateSimulation(e.target.value));
updateSimulation('clear');
</script>

</body>
</html>
