<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å°ˆé¡Œç°¡å ± + æ¨¡æ“¬å¯¦é©—</title>
<link rel="stylesheet" href="style.css">
<style>
/* å¹»ç‡ˆç‰‡æ¨£å¼ */
#viewer { text-align:center; margin-bottom:50px; }
#slideImg { max-width:90%; height:auto; border:3px solid #00ff88; border-radius:10px; }
/* æ¨¡æ“¬å¯¦é©—CSSä¿æŒåŸæœ¬æ¨£å¼ */
* { box-sizing: border-box; }
body { margin:0; padding:20px; font-family:'Segoe UI',sans-serif; background:#000; color:#fff; min-height:100vh; }
.container { display:grid; grid-template-columns:400px 1fr; gap:20px; max-width:1600px; margin:0 auto; }
.control-panel { background:linear-gradient(135deg,#1a1a2e,#16213e); padding:20px; border-radius:15px; border:2px solid #00ff88; }
.control-group { margin-bottom:25px; background:rgba(0,255,136,0.1); padding:15px; border-radius:10px; }
.control-group h3 { color:#00ff88; margin:0 0 15px 0; }
.slider-container { display:flex; align-items:center; margin:12px 0; background:rgba(255,255,255,0.05); padding:8px; border-radius:8px; }
.slider-container label { width:130px; font-size:13px; color:#ddd; }
.slider { flex:1; margin:0 12px; height:6px; background:#333; border-radius:3px; outline:none; -webkit-appearance:none; }
.slider::-webkit-slider-thumb { -webkit-appearance:none; width:18px; height:18px; background:#00ff88; border-radius:50%; cursor:pointer; }
.slider:disabled { opacity:0.5; cursor:not-allowed; }
.slider:disabled::-webkit-slider-thumb { background:#666; cursor:not-allowed; }
.value-display { width:85px; text-align:right; font-size:13px; color:#00ff88; font-weight:bold; }
.simulation-area { background:#111; height:250px; border:3px solid #00ff88; border-radius:15px; position:relative; overflow:hidden; margin-bottom:20px; }
.light-ray { position:absolute; border-radius:2px; animation:pulse 2s infinite; }
.incident-ray { background:linear-gradient(to bottom,transparent,#ffff00,#ffff00); box-shadow:0 0 8px #ffff00; }
.refracted-ray { background:linear-gradient(to bottom,#00ff88,transparent); box-shadow:0 0 8px #00ff88; }
.solar-panel { position:absolute; border-radius:5px; border:3px solid #00ff88; box-shadow:0 0 15px rgba(0,255,136,0.4); }
.panel-surface { position:absolute; top:0; left:0; right:0; height:4px; background:#00ff88; box-shadow:0 0 10px #00ff88; }
@keyframes pulse { 0%{opacity:0.7}50%{opacity:1}100%{opacity:0.7} }
.chart-container { background:#2a2a3e; border-radius:15px; padding:20px; margin-bottom:20px; }
.stats-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:20px; margin-bottom:20px; }
.stat-card { background:#2a2a3e; padding:15px; border-radius:10px; border:1px solid #3a3a4e; }
.stat-card h3 { color:#00ff88; font-size:1em; margin-bottom:5px; }
.stat-value { font-size:1.5em; font-weight:bold; }
.stat-label { font-size:0.9em; color:#aaa; }
table { width:100%; border-radius:10px; overflow:hidden; margin-top:10px; }
th,td { padding:8px; text-align:center; color:#fff; }
th { background:#00ff88; color:#000; }
tr:nth-child(even){background:#3a3a4e;}
.color-indicator { display:inline-block; width:15px; height:15px; border-radius:50%; margin-right:5px; vertical-align:middle; border:1px solid #555; }
</style>
</head>
<body>

<!-- å¹»ç‡ˆç‰‡å€ -->
<div id="viewer">
  <img id="slideImg" src="images/Thank you_page-0001.jpg">
</div>
<div id="startScreen">
  <button id="startBtn">â–¶ é–‹å§‹æ’­æ”¾</button>
</div>

<!-- æ¨¡æ“¬å¯¦é©—å€ -->
<div class="container">
    <!-- æ§åˆ¶é¢æ¿ -->
    <div class="control-panel">
        <div class="control-group">
            <h3>ğŸ¨ ç»ç’ƒç´™é¡è‰²</h3>
            <select id="glassColor" style="width:100%;height:30px;background:#333;color:#fff;border:1px solid #00ff88;border-radius:5px;">
                <option value="clear">é€æ˜(100%)</option>
                <option value="lightBlue">æ·ºè—(85%)</option>
                <option value="green">ç¶ è‰²(75%)</option>
                <option value="yellow">é»ƒè‰²(70%)</option>
                <option value="orange">æ©™è‰²(60%)</option>
                <option value="red">ç´…è‰²(55%)</option>
                <option value="darkBlue">æ·±è—(45%)</option>
                <option value="purple">ç´«è‰²(40%)</option>
                <option value="brown">æ£•è‰²(35%)</option>
                <option value="gray">ç°è‰²(25%)</option>
            </select>
            <span class="value-display" id="glassColorValue">é€æ˜</span>
        </div>
        <div class="simulation-area" id="simulationArea"></div>
    </div>

    <!-- LED åœ–è¡¨é¢æ¿ -->
    <div>
        <div class="chart-container">
            <canvas id="mainChart"></canvas>
        </div>
        <div class="stats-grid">
            <div class="stat-card"><h3>æœ€é«˜é›»æµ</h3><div class="stat-value" id="maxCurrent">-</div><div class="stat-label" id="maxLED">-</div></div>
            <div class="stat-card"><h3>æœ€ä½é›»æµ</h3><div class="stat-value" id="minCurrent">-</div><div class="stat-label" id="minLED">-</div></div>
            <div class="stat-card"><h3>å¹³å‡é›»æµ</h3><div class="stat-value" id="avgCurrent">-</div><div class="stat-label">6è‰²å¹³å‡</div></div>
        </div>
        <table>
            <thead>
                <tr><th>LED é¡è‰²</th><th>æ³¢é•·</th><th>é›»æµ(mA)</th></tr>
            </thead>
            <tbody id="dataTable"></tbody>
        </table>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>

<script>
// å¹»ç‡ˆç‰‡ JS
const audio = new Audio("audio/part1.mp3");
const img = document.getElementById("slideImg");

const slides = [
  { time: 0, src: "images/Thank you_page-0001.jpg" },
  { time: 15, src: "images/Thank you_page-0002.jpg" },
  { time: 18, src: "images/Thank you_page-0003.jpg" },
  { time: 41, src: "images/Thank you_page-0004.jpg" },
  { time: 69, src: "images/Thank you_page-0005.jpg" },
  { time: 95, src: "images/Thank you_page-0006.jpg" },
  { time: 100, src: "images/Thank you_page-0007.jpg" },
  { time: 141, src: "images/Thank you_page-0008.jpg" },
  { time: 145, src: "images/Thank you_page-0009.jpg" },
  { time: 153, src: "images/Thank you_page-0010.jpg" },
  { time: 181, src: "images/Thank you_page-0011.jpg" },
  { time: 184, src: "images/Thank you_page-0012.jpg" },
  { time: 200, src: "images/Thank you_page-0013.jpg" },
  { time: 202, src: "images/Thank you_page-0014.jpg" },
  { time: 203, src: "images/Thank you_page-0015.jpg" },
  { time: 204, src: "images/Thank you_page-0016.jpg" },
  { time: 205, src: "images/Thank you_page-0017.jpg" },
  { time: 206, src: "images/Thank you_page-0018.jpg" },
  { time: 207, src: "images/Thank you_page-0019.jpg" },
  { time: 218, src: "images/Thank you_page-0020.jpg" },
  { time: 233, src: "images/Thank you_page-0021.jpg" },
  { time: 276, src: "images/Thank you_page-0022.jpg" },
  { time: 307, src: "images/Thank you_page-0023.jpg" },
  { time: 343, src: "images/Thank you_page-0024.jpg" }
];

img.src = slides[0].src;

audio.addEventListener("timeupdate", () => {
  const t = audio.currentTime;
  for (let i = slides.length - 1; i >= 0; i--) {
    if (t >= slides[i].time) {
      if (img.src.indexOf(slides[i].src) === -1) img.src = slides[i].src;
      break;
    }
  }
});

document.getElementById("startBtn").addEventListener("click", () => {
  document.getElementById("startScreen").style.display = "none";
  audio.currentTime = 0;
  audio.play();
});

// æ¨¡æ“¬å¯¦é©— JS
const rawData = {red:4.51, green:3.64, blue:3.79, yellow:5.68, darkBlue:1.69, purple:3.25};
const ledInfo = [
    {name:'ç´…è‰²', nameEn:'red', wavelength:650, color:'#FF0000'},
    {name:'ç¶ è‰²', nameEn:'green', wavelength:535, color:'#00FF00'},
    {name:'è—è‰²', nameEn:'blue', wavelength:470, color:'#87CEEB'},
    {name:'é»ƒè‰²', nameEn:'yellow', wavelength:570, color:'#FFFF00'},
    {name:'æ·±è—', nameEn:'darkBlue', wavelength:450, color:'#00008B'},
    {name:'ç´«è‰²', nameEn:'purple', wavelength:400, color:'#9370DB'}
];
const glassTrans = {clear:1, lightBlue:0.85, green:0.75, yellow:0.7, orange:0.6, red:0.55, darkBlue:0.45, purple:0.4, brown:0.35, gray:0.25};

let ctx = document.getElementById('mainChart').getContext('2d');
let chart = null;
function updateChart(currentData){
    const labels = ledInfo.map(d=>d.name);
    const data = ledInfo.map(d=>currentData[d.nameEn]);
    if(chart) chart.destroy();
    chart = new Chart(ctx,{
        type:'bar',
        data:{labels:labels,datasets:[{label:'é›»æµ(mA)',data:data,backgroundColor:ledInfo.map(d=>d.color)}]},
        options:{responsive:true,plugins:{legend:{display:false}}}
    });
}
function updateStats(currentData){
    const values = Object.values(currentData);
    const max = Math.max(...values), min = Math.min(...values);
    const avg = values.reduce((a,b)=>a+b,0)/values.length;
    const maxKey = Object.keys(currentData).find(k=>currentData[k]===max);
    const minKey = Object.keys(currentData).find(k=>currentData[k]===min);
    document.getElementById('maxCurrent').textContent=max.toFixed(2);
    document.getElementById('maxLED').textContent=ledInfo.find(l=>l.nameEn===maxKey).name;
    document.getElementById('minCurrent').textContent=min.toFixed(2);
    document.getElementById('minLED').textContent=ledInfo.find(l=>l.nameEn===minKey).name;
    document.getElementById('avgCurrent').textContent=avg.toFixed(2);
}
function updateTable(currentData){
    const tbody = document.getElementById('dataTable');
    tbody.innerHTML='';
    ledInfo.forEach(l=>{
        const row = tbody.insertRow();
        row.innerHTML=`<td><span class="color-indicator" style="background:${l.color}"></span>${l.name}</td><td>${l.wavelength}</td><td>${currentData[l.nameEn].toFixed(2)}</td>`;
    });
}
function updateSimulation(glass){
    document.getElementById('glassColorValue').textContent=glass==='clear'?'é€æ˜':glass;
    const t = glassTrans[glass];
    const currentData = {};
    for(let k in rawData) currentData[k]=rawData[k]*t;
    updateChart(currentData);
    updateStats(currentData);
    updateTable(currentData);

    const sim = document.getElementById('simulationArea');
    sim.innerHTML='';
    const panel = document.createElement('div');
    panel.className='solar-panel';
    panel.style.left='100px'; panel.style.top='80px'; panel.style.width='200px'; panel.style.height='80px';
    panel.style.background=`linear-gradient(135deg, #1e3c72, #2a5298)`;
    sim.appendChild(panel);

    const ray = document.createElement('div');
    ray.className='light-ray incident-ray';
    ray.style.left='200px'; ray.style.top='20px'; ray.style.width='4px'; ray.style.height='60px';
    sim.appendChild(ray);
    const ray2 = document.createElement('div');
    ray2.className='light-ray refracted-ray';
    ray2.style.left='200px'; ray2.style.top='100px'; ray2.style.width='4px'; ray2.style.height='100px';
    ray2.style.opacity=t*0.8+0.2;
    sim.appendChild(ray2);
}
document.getElementById('glassColor').addEventListener('change',e=>updateSimulation(e.target.value));
updateSimulation('clear');
</script>

</body>
</html>
